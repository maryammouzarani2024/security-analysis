#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/types.h>
#include <unistd.h>


#define ERROR(x)     do { perror(x); exit(-1); } while (0)
#define ASSERT(x, y) do { if (!(x)) { perror(y); exit(-1); } } while (0)


int main(int argc, char *argv[]) {
    char *buffer;
buffer=(char *)malloc(30);
    int count = 0;
	int index;
     char *buffer2, *buffer3;
buffer2=(char *)malloc(20);
buffer3=(char *)malloc(8);
strcpy(buffer3,"aaaaaaa");
    int fd, i, k;

    if (argc != 2) {
        printf("Usage: %s <file>\n", argv[0]);
        exit(-1);
    }

    fd = open(argv[1], O_RDONLY);
    ASSERT(fd != -1, "open");

    /*if (read(fd, &buffer[i], 4) != 4) {
        ERROR("read");
    }*/
    
    /*for (i = 0; i < 4; i++) {
        if (read(fd, &buffer[i], sizeof(char)) != sizeof(char)) {
            ERROR("read");
        }
    }*/
    

  	int ret;
  	ret = read(fd, buffer, 1000);
index=(int)buffer[1];
//buffer[index]='z';

	//buffer[21]='s';
//	printf("the buffer is %s \n", buffer);
	//printf("the buffer 3 is %s \n", buffer3);
 /*   if (buffer2[0] == 'b') count++;
    if (buffer2[1] == 'a') count++;
    if (buffer[2] == 'd') count++;
    if (buffer[3] == '!') {
*/
if (buffer[1]=='a'){
	if (buffer[3]=='z'){
strcpy(buffer2, buffer);
count++;}
}
  if (count == 4) {
        printf("ok\n");
    }

	
if (buffer[1]=='b'){
	printf("helllp");
}
	free(buffer);
	free(buffer2);
	//free(buffer);

    return 0;
}
